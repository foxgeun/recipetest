<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}">
<div layout:fragment="content">

	<th:block layout:fragment="css">

		<link rel="stylesheet" href="/css/itemCategory.css">

	</th:block>
	
	<div class="site-section mt-5 mb-5">
	<div class="container">
		<form role="form" method="get" action="/item/total" th:object="${itemSearchDto}">
			<input type="hidden" th:value="${itemSearchDto.itemCategoryEnum == null ? '' : itemSearchDto.itemCategoryEnum}" th:field="*{itemCategoryEnum}"> 
			<div class="search_form pb-3">
					 <input type="text" class="form-control form_search"
						th:field="*{searchQuery}" placeholder="상품명를 입력해주세요">
					<button id="searchBtn" type="submit" class="form_search_bt">검색</button>
				</div>
						<ul class="mt20 key2">
								<li class="active"><a href="/item/total">전체</a></li>
								<li><a href="/item/total?itemCategoryEnum=푸드">#푸드</a></li>
								<li><a href="/item/total?itemCategoryEnum=키친">#키친</a></li>
								<li><a href="/item/total?itemCategoryEnum=리빙">#리빙</a></li>
                                <li><a href="/item/total?itemCategoryEnum=가전">#가전</a></li>
							</ul>
		<div class="thmb_list02 pt60">
        <div class="items-header items-meta d-lg-flex justify-content-between align-items-center">
				<div class="item-count">
				 <p class="prdCount">검색결과 <strong>[[${category.getTotalElements()}]]</strong>건 조회</p>
				</div>
				<div class="form-inline item-display-options">
					<div class="form-group">
						<label class="sr-only" th:for="type">정렬 항목 선택</label>
						<select class="form-control form-control-sm select-sortkey ml-3" th:field="*{type}">
							<option value="order" selected="">최신순</option>
							<option value="reviewAvg">평점순</option>
							<option value="reviewCount">리뷰많은순</option>
							<option value="lowPrice">낮은가격순</option>
							<option value="highPrice">높은가격순</option>
						</select>
						<label class="sr-only" th:for="dataNumr">페이지당 출력 갯수 선택</label>
						<select class="form-control form-control-sm select-display" th:field="*{dataNum}">
							<option value="12" selected="">12</option>
							<option value="24">24</option>
							<option value="36">36</option>
						</select>
						<label class="sr-only" for="item-submit-header">선택옵션 전송</label>
						<div class="input-group" style="margin-left: 7px;">
							<input type="submit" class="btn btn-lightgrey btn-sm submit-sort-display" title="조회" value="조회"></input>
						</div>
					</div>
						
				</div>
			</div>
        
        
			<div class="list_box">
		<div class="list_area">
			
			
			<th:block th:each="item , status:${category}">
			<div class="item">
				<div class="thmb">
					<a th:href="'/item/' + ${item.id}"><div class="img">
					<div class="scale">
					<img src="/img/장어덮밥.jpg" >
					<span class="item-ranking">[[${status.index+1}]]</span>
					</div>
					</div>
						
					</a>
				</div>
				<div class="info">
					<p class="name">[[${item.itemNm}]]</p>
            <th:block th:if="${item.sale != 0}">
					<p class="ori_price"> [[${#numbers.formatInteger(item.price, 0, 'COMMA')}]]원</p>  
					<div class="price_info"><span class="discount">[[${item.sale}]]<small>%</small></span> 
					  </div>
            </th:block>
					<div class="sales_price"> 
					<p>[[${#numbers.formatInteger(item.price - (item.price * item.sale / 100), 0, 'COMMA')}]]</p>
					<span>원</span>
					</div>
				<div class="review-list__rating-wrap d-flex">
                        <span class="review-list__rating">
                         <span class="review-list__rating__unit">
                                <span class="review-list__rating__active"
                                 th:style="'width:' + (${item.retingAvg} * 20) + '%'"></span>
                            </span>
                        </span>
                        <p class="review_count_1"> [[${item.retingAvg}]]  <span class="reting_line">([[${item.reviewCount}]])</span>  </p>
               </div>
               
               <!-- 40,000원 이상 무료배송 -->
               <th:block th:if="${(item.price - (item.price * item.sale / 100)) > 40000}">
				   
               <div class="ProductBenefitLabelGroupstyle__OptionLabelGroup-n65omn-0 kNbJfO">
				   <div class="ProductBenefitLabel-sc-10qyuuq-0 dmYHTU">무료배송
				   </div>
				   </div>  
				   
			   </th:block>
				</div>
			</div>
			</th:block>
			
			
		</div>
				<div class="style__PagingWrapper-b83qno-6 bYnXQa mt-3" 
				th:with="start=${(category.number/maxPage)*maxPage + 1}
			    ,end=(${(category.totalPages == 0) ? 1 : (start + (maxPage - 1) < category.totalPages ? start + (maxPage - 1) : category.totalPages)})">
				
							<button class="style__PagePrevButton-b83qno-8 loxVUo" th:classappend="${category.first}?'bt_hd'" >
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
								fill="none" viewBox="0 0 19 18">
									<path stroke="#000" d="m14.953 6.469-5.07 5.062L4.828 6.47"></path>
								</svg>
							</button>
							<ul>
								<a offset="0" class="style__PageNumber-b83qno-7"
								 th:each="page: ${#numbers.sequence(start, end)}"
								 th:classappend="${category.number eq page-1}?'hIVTuk':'iBHoeR'"
								 th:href="'/item/total/' + ${page - 1}"
								 th:feild="*{pageNum}"
								 th:onclick="'javascript:reviewPage(' + ${page - 1} +')'">
								 <span>[[${page}]]</span>
								 </a>
							</ul>
						      <button class="style__PageNextButton-b83qno-9 gCfLmH" th:classappend="${category.last}?'bt_hd'">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 19 18">
							        <path stroke="#000" d="m14.953 6.469-5.07 5.062L4.828 6.47"></path>
					            </svg>
							   </button>
				</div>
		</div>
		</div>
    	
	</div>
</div>
				</form>
	
</div>



<th:block layout:fragment="script">
	<script th:inline="javascript">
	
	$(document).ready(function() {
		
	 });
	
		
	</script>
	</th:block>


</html>