<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="/css/inqPopup.css" />
</head>
<body>
	<section class="n-qa-write-pop">
		<header>
			<h2>상품문의</h2>
		</header>
		<form name="qa_write_form" id="qa_write_form">
			<div class="qa-product">
				<div class="qa-product-img">
					<img th:src="${imgList.get(0).getImgUrl()}" th:alt="${item.itemNm}">
				</div>
				<div class="qa-product-info">
					<p class="qa-info-brand">이젠 스토어</p>
					<p class="qa-info-name">[[${item.itemNm}]]</p>
					<p class="box_price">
						<span class="txt_origin_price">[[${#numbers.formatInteger(item.price, 0,
						'COMMA')}]]원</span> [[${#numbers.formatInteger(item.price - (item.price * item.sale /
						100), 0, 'COMMA')}]]<span
							class="txt_unit_price">원</span> <span
							class="payment_off qa_payment_off">[[${item.sale}]]% SALE</span>
					</p>
				</div>

			</div>
			<table class="qa-write-table">
				<tbody>
					<tr>
						<th>문의유형</th>
						<td class="qa-type-area">
						 <input type="radio" id="itemInqBoardEnum" name="itemInqBoardEnum" class="n-radio" value="배송"> 
						 <label for="itemInqBoardEnum">배송</label>
						 <input type="radio" id="itemInqBoardEnum" name="itemInqBoardEnum" class="n-radio" value="재입고"> 
						 <label for="itemInqBoardEnum">재입고</label> 
						 <input type="radio" id="itemInqBoardEnum" name="itemInqBoardEnum" class="n-radio" value="상품상세문의"> 
						 <label for="itemInqBoardEnum">상품상세문의</label>
						 <input type="radio" id="itemInqBoardEnum" name="itemInqBoardEnum" class="n-radio" value="기타"> 
						 <label for="itemInqBoardEnum">기타</label>
						 </td>
					</tr>
					<tr>
						<th></th>
						<td>
							<ul class="qa-comment" style="margin-top: -20px;">
								<li>클레임(교환/환불/취소)관련 문의는 <a href="#"
									style="border-bottom: 1px solid #ddd; font-weight: bold;"
									target="_blank">마이페이지 &gt; 1:1 문의</a>에서 문의 바랍니다.
								</li>
							</ul>
						</td>
					</tr>

					<tr>
						<th>제목</th>
						<td class="qa-title-area">
						<input type="text" name="title" id="title" class="tit n-input" maxlength="15" placeholder="15자 이내 입력"> 
						<input type="checkbox" name="itemInqEnum" id="itemInqEnum" class="n-check" value="비밀글"> 
						<label for="itemInqEnum">비밀글</label>
						</td>
					</tr>
					<tr>
						<th>내용</th>
						<td class="qa-subject-area">
						<textarea name="content" id="content"
						rows="10" cols="45" placeholder="내용 입력"></textarea>
					
							</td>
					</tr>
				</tbody>
			</table>
		</form>

		<dl class="qa-info-area">
			<dt>상품문의 안내</dt>
			<dd>
				<ul class="qa-comment">
					<li>상품문의는 재입고, 사이즈, 배송 등 상품에 대하여 담당자에게 문의하는 게시판입니다.</li>
					<li><strong>욕설, 비방, 거래 글, 분쟁 유발, 명예훼손, 허위사실 유포, 타 쇼핑몰
							언급,광고성 등의 부적절한 게시글은 금지합니다. 더불어 상품 문의 시 비밀글만 작성되도록 제한됩니다.</strong></li>
					<li><strong>주문번호, 연락처, 계좌번호 등의 개인 정보 관련 내용은 공개되지 않도록
							비밀글로 문의해 주시기 바랍니다.</strong> 공개된 글은 비밀글로 전환될 수 있으며, 개인 정보 노출로 인한 피해는 이젠
						스토어가 책임지지 않습니다.</li>
				</ul>
			</dd>
		</dl>
		<div class="qa-btn-area">
			<a class="n-btn btn-lighter"
				onclick="location.reload(); return false;">취소</a> <a
				class="n-btn btn-accent"
				onclick="inqOk();">작성하기</a>
		</div>
	</section>
	
	<input type="hidden" th:value="${itemId}" id="itemId">
	
</body>

<script>
	function inqOk() {
		
		var itemId = $("#itemId").val();
		
		var itemInqBoardEnum = $("#itemInqBoardEnum").val();
		
		var title = $("#title").val();
		
		var content = $("#content").val();
		
		var itemInqEnum = $("#itemInqEnum").val();
		
		if (!itemInqBoardEnum || !title || !content) {
		    // 하나라도 비어있으면 종료
		    return;
		}
		
		
		var paramData = {
				id : itemId,
				itemInqBoardEnum : itemInqBoardEnum,
				title : title,
				content : content,
				itemInqEnum : itemInqEnum
			}
		
		if (confirm("문의글 등록하시겠습니까?")) {
			var param = JSON.stringify(paramData);

			$.ajax({
				url : url, //request URL
				type : "POST", //전송방식
				contentType : "application/json",
				data : param, //서버에 전송할 데이터
				beforeSend : function(xhr) {
					//데이터를 전송하기전에 헤더에 csrf 값을 설정
					xhr.setRequestHeader(header, token);
				},
				dataType : "json",
				cache : false,
				success : function(result, status) {
					alert("삭제 되었습니다.");
					//location.href = '/';
				},
				error : function(jqXHR, status, error) {
					if (jqXHR.status == '401') {
						alert('관리자로그인 후 이용해주세요.');
						//	location.href = '/';
					} else {
						//에러메세지 출력(ResponseEntity에서 받아온 값을 출력해준다)
						alert(jqXHR.responseText);
					}
				}
			})
		}
	}
</script>


</html>